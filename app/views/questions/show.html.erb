<%# showpage %>
<div class="container-quiz py-5">
  <div class="main-card p-4 mx-auto bg-light" style="width: 70rem;">
    <h2 class="mb-3">Quiz</h2>
    <h1 class="fw-bold mb-5"><%= @quiz.name %></h1>

    <div class="card-quiz">
        <fieldset>
          <legend class="fw-bold mb-5"><%= @question.content %></legend>
          <div class="question-content">
              <%= simple_form_for [@question, @user_answer] do |f| %>
                <div class="multiple-choice-box">
                  <div class="answer-content mb-5">
                    <%= f.input :answer,
                                legend_tag: false,
                                collection_wrapper_tag: 'div',
                                collection_wrapper_class: 'category-wrapper',
                                item_wrapper_class: 'category-item',
                                input_html: {class: 'category-selector'},
                                as: :radio_buttons,
                                collection: @question.answers.map(&:content)
                    %>
                  </div>
                  <div class="d-flex justify-content-center m-4 gap-4">
                    <%= link_to "Previous", (quiz_question_path(@quiz, @question.id - 1) if @questions.index(@question) > 0), class: "btn btn-outline-secondary btn-lg" %>
                    <%= f.submit "Next", class: "btn btn-outline-primary btn-lg" %>
                  </div>
                  <div class="question-count">
                    <%= @question.content[0] %> / <%= @questions.all.count %> questions answered
                  </div>
                </div>
              <% end %>
          </div>
        </fieldset>
      </div>
  </div>
  <div class= "p-4 mx-auto bg-light" style="width: 70rem;">
  <div class="progress">
      <div class="progress-bar" role="progressbar" style="width: <%= @percentage %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
        <%= @percentage %>% <!-- Display the percentage symbol -->
      </div>
    </div>
  </div>
</div>
